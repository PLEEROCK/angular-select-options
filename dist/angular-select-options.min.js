!function(){"use strict";function t(t){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?(?:\s+order\s+by\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?$/,s=function(t,e){return e&&t?(t+=".",e.substr(0,t.length)===t?e.substr(t.length):e):e},r=function(t){if(!t)return t;var e=t.lastIndexOf(".");return-1!==e?t.substring(e+1):t};return{restrict:"A",controller:["$scope","$attrs",function(n,i){if(!i.selectOptions)throw"No options has been specified";var o=i.selectOptions.match(e);if(!o)throw'Expected expression in form of "_select_ (as _label_)? for (_key_,)?_value_ in _collection_ track by (_key_) order by (_key_) group by (_key_)", but given '+i.selectOptions;this.findItemInModel=function(t,e){var s=this.getTrackBy(),r=this.parseTrackBy(t);if(!s||!r)return this.parseItemValue(t);var n=null;return angular.forEach(e,function(t){t[s]===r&&(n=t)}),n},this.getItemNameWithoutPrefixes=function(){return r(this.getItemName())},this.getItemName=function(){return o[2]||o[1]},this.getItemValue=function(){return o[2]?o[1]:this.getItem()},this.getItem=function(){return o[3]||o[5]},this.getItems=function(){return o[6]},this.getKey=function(){return o[4]},this.getOrderBy=function(){var t=o[8];return s(this.getItem(),t)},this.getTrackBy=function(){var t=o[7];return r(t)},this.getGroupBy=function(){return o[9]},this.getGroupByWithoutPrefixes=function(){return s(this.getItem(),this.getGroupBy())},this.parseItemName=function(e){var s={};s[this.getItem()]=e;var r=t(this.getItemName())(n,s);return String(r).replace(/<[^>]+>/gm,"")},this.parseItemGroup=function(e){var s={};s[this.getItem()]=e;var r=t(this.getGroupBy())(n,s);return r?String(r).replace(/<[^>]+>/gm,""):r},this.parseItemValueFromSelection=function(e){var s=this.getItemValue().replace(".","_"),r=this.getItemName().replace(this.getItemValue(),s),i={};i[s]=e;var o=t(r)(n,i);return console.log(o),String(o).replace(/<[^>]+>/gm,"")},this.parseItemValue=function(e){var s={};return s[this.getItem()]=e,t(this.getItemValue())(n,s)},this.parseTrackBy=function(e){var s={};return s[this.getItem()]=e,t(o[7])(n,s)},this.parseItems=function(){return t(this.getItems())(n)},this.applyOnScope=function(t){return n.$apply(t)},this.log=function(){console.log("item name: "+this.getItemName()),console.log("item value: "+this.getItemValue()),console.log("key: "+this.getKey()),console.log("item: "+this.getItem()),console.log("items: "+this.getItems()),console.log("orderBy: "+this.getOrderBy()),console.log("trackBy (full): "+o[7]),console.log("trackBy: "+this.getTrackBy())}}]}}angular.module("selectOptions",[]),angular.module("selectOptions").directive("selectOptions",t),t.$inject=["$parse"]}();